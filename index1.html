
<!DOCTYPE html>
<html>
<head>
	<title>Example</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="leaflet.css" />
	<script src="leaflet.js"></script>
</head>
<body>
<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>
<style>
.range {
  position:absolute;
  width:100%;
  }
.leaflet-top .leaflet-control-zoom {
  top:20px;
  }
</style>

<div id='map'></div>


<script>
	
	L.Control.Swipe = L.Control.extend({
	options: {
		position: 'bottomright',
	},
	map:null,
	_this:null,

	initialize: function (options) {

		L.setOptions(this, options);
	 L.Control.Swipe._this=this;
		this._attributions = {};
	},

	onAdd: function (map) {
		this.map=map;
		
		var that=this;
		this._container = L.DomUtil.create('div', 'leaflet-control-swipe');
		L.DomEvent.disableClickPropagation(this._container);
        
        //label containers
		this._labelcontainer = L.DomUtil.create("div", "swipe", this._container);
		  var range = document.createElement('input');
    range.id = 'range';
     range.class = 'range';
    range.type = 'range';
    range.min = "0";
     range.max = "1.0";
      range.step = "any";
      range.style.width= map.getSize()['x']+'px';
    this._labelcontainer.appendChild(range);
	  range.addEventListener("change",function(){ 
	  	that.clip(this.value);
	  	});
	  	  range.addEventListener("input",function(){ 
	  	that.clip(this.value);
	  	});
	  
		map.on('move', this.clip);
		

		return this._container;
		
	
	},
	clip:function(val){
	  var that=L.Control.Swipe._this;
		 var nw = that.map.containerPointToLayerPoint([0, 0]),
      se = that.map.containerPointToLayerPoint(that.map.getSize()),
      clipX = nw.x + (se.x - nw.x) * val+12;

     that.getLayer(that.map._layers).getContainer().style.clip = 'rect(' + [nw.y, clipX, se.y, nw.x].join('px,') + 'px)';
		},
		getLayer:function(obj) {
        var last;
        for (var i in obj) {
            if (obj.hasOwnProperty(i) && typeof (i) !== 'function') {
                last = obj[i];
            }
        }
        return last;
    }

});

L.control.swipe = function(options) {
	return new L.Control.Swipe(options);
};
var map = L.map('map');
 img= L.tileLayer("http://t0.tianditu.cn/vec_w/wmts?" +
            "SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=vec&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles" +
            "&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}", {
        minZoom: 4,
        maxZoom: 18
    }).addTo(map);
    
var overlay= L.tileLayer("http://t0.tianditu.cn/img_w/wmts?" +
            "SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER=img&STYLE=default&TILEMATRIXSET=w&FORMAT=tiles" +
            "&TILEMATRIX={z}&TILEROW={y}&TILECOL={x}", {
        minZoom: 4,
        maxZoom: 18
    }).addTo(map);


L.control.swipe().addTo(map);

map.setView([49.434,-123.272], 7);

</script>
</body>
</html>